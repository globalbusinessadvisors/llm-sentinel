# LLM-Sentinel Cargo Dependencies Reference
# Copy relevant sections to your Cargo.toml as needed
# All versions verified as of November 2025

[package]
name = "llm-sentinel"
version = "0.1.0"
edition = "2021"
rust-version = "1.83"  # Minimum Rust version

# =============================================================================
# ASYNC RUNTIME & CONCURRENCY
# =============================================================================

[dependencies.tokio]
version = "1.42"
features = [
    "full",           # All features (use in development)
    # For production, specify only needed features:
    # "rt-multi-thread", "macros", "time", "sync", "io-util", "net"
]

[dependencies.crossfire]
version = "2.1"
# High-performance async channel, lockless design

[dependencies.ractor]
version = "0.12"
optional = true
# Actor framework with Erlang-style supervision

[dependencies.actix]
version = "0.13"
optional = true
# Alternative actor framework (maximum performance)

# =============================================================================
# DATA INGESTION & PROCESSING
# =============================================================================

[dependencies.influxdb2]
version = "0.5"
features = ["reqwest"]
# InfluxDB v3 client (Rust-based TSDB)

[dependencies.prometheus]
version = "0.13"
optional = true
# Prometheus metrics client (for operational monitoring)

[dependencies.rdkafka]
version = "0.36"
features = ["tokio"]
# Kafka client for high-throughput event streaming

[dependencies.nats]
version = "0.25"
optional = true
# NATS client (lightweight alternative to Kafka)

[dependencies.lapin]
version = "2.5"
optional = true
# RabbitMQ client with Tokio support

[dependencies.datafusion]
version = "44.0"
# Apache Arrow DataFusion for stream processing

[dependencies.arrow]
version = "54.0"
# Apache Arrow in-memory format

# =============================================================================
# HTTP & gRPC FRAMEWORKS
# =============================================================================

[dependencies.axum]
version = "0.7"
features = ["macros", "tower-log"]
# Modern HTTP framework, excellent Tokio integration

[dependencies.actix-web]
version = "4.9"
optional = true
# Alternative HTTP framework (maximum performance)

[dependencies.tower]
version = "0.5"
# Service abstraction (used by Axum)

[dependencies.tower-http]
version = "0.6"
features = ["trace", "cors", "compression-gzip"]
# HTTP middleware for Tower/Axum

[dependencies.tonic]
version = "0.12"
features = ["transport", "codegen", "prost"]
# gRPC framework

[dependencies.prost]
version = "0.13"
# Protocol Buffers implementation

# =============================================================================
# ANALYTICS & MACHINE LEARNING
# =============================================================================

[dependencies.ndarray]
version = "0.16"
features = ["serde"]
# N-dimensional arrays for numerical computing

[dependencies.nalgebra]
version = "0.33"
optional = true
# Linear algebra library (specialized for 1D/2D)

[dependencies.statrs]
version = "0.17"
# Statistical functions and distributions

[dependencies.smartcore]
version = "0.4"
features = ["ndarray-bindings"]
# Comprehensive ML library

[dependencies.linfa]
version = "0.7"
optional = true
# Modular ML toolkit

[dependencies.augurs-outlier]
version = "0.6"
# Time-series outlier detection

[dependencies.isolation_forest]
version = "0.3"
optional = true
# Isolation Forest anomaly detection

[dependencies.extended-isolation-forest]
version = "0.2"
optional = true
# Extended Isolation Forest

[dependencies.hampel]
version = "0.1"
optional = true
# Sequential outlier detection

# =============================================================================
# SERIALIZATION & STORAGE
# =============================================================================

[dependencies.serde]
version = "1.0"
features = ["derive"]
# De facto serialization standard

[dependencies.serde_json]
version = "1.0"
# JSON serialization

[dependencies.serde_yaml]
version = "0.9"
# YAML serialization

[dependencies.bincode]
version = "1.3"
# Binary serialization (efficient)

# =============================================================================
# CACHING
# =============================================================================

[dependencies.moka]
version = "0.12"
features = ["future"]
# High-performance in-memory cache

[dependencies.redis]
version = "0.27"
features = ["tokio-comp", "connection-manager", "cluster"]
# Redis client for distributed caching

# =============================================================================
# SCHEMA VALIDATION
# =============================================================================

[dependencies.jsonschema]
version = "0.24"
# High-performance JSON Schema validator

[dependencies.schemars]
version = "0.8"
features = ["preserve_order"]
# JSON Schema generation from Rust types

[dependencies.serde_valid]
version = "0.25"
optional = true
# Alternative: validation with serde

# =============================================================================
# OBSERVABILITY
# =============================================================================

[dependencies.opentelemetry]
version = "0.27"
features = ["trace", "metrics"]
# OpenTelemetry API

[dependencies.opentelemetry-sdk]
version = "0.27"
features = ["rt-tokio"]
# OpenTelemetry SDK

[dependencies.opentelemetry-otlp]
version = "0.27"
features = ["tokio", "http-proto"]
# OTLP exporter (recommended for production)

[dependencies.metrics]
version = "0.24"
# Metrics facade

[dependencies.metrics-exporter-prometheus]
version = "0.16"
# Prometheus metrics exporter

[dependencies.tracing]
version = "0.1"
features = ["attributes"]
# Structured logging and tracing

[dependencies.tracing-subscriber]
version = "0.3"
features = ["env-filter", "json", "ansi"]
# Tracing subscriber implementations

[dependencies.tracing-opentelemetry]
version = "0.27"
# Integration between tracing and OpenTelemetry

# =============================================================================
# CONFIGURATION & CLI
# =============================================================================

[dependencies.figment]
version = "0.10"
features = ["toml", "json", "yaml", "env"]
# Hierarchical configuration management

[dependencies.clap]
version = "4.5"
features = ["derive", "env", "cargo"]
# Command-line argument parser

# =============================================================================
# ERROR HANDLING
# =============================================================================

[dependencies.anyhow]
version = "2.0"
# Error handling for applications

[dependencies.thiserror]
version = "2.0"
# Error handling for libraries

[dependencies.snafu]
version = "0.8"
optional = true
# Alternative: combines anyhow + thiserror features

# =============================================================================
# UTILITIES
# =============================================================================

[dependencies.chrono]
version = "0.4"
features = ["serde"]
# Date and time library

[dependencies.uuid]
version = "1.11"
features = ["v4", "serde"]
# UUID generation

[dependencies.url]
version = "2.5"
features = ["serde"]
# URL parsing

[dependencies.regex]
version = "1.11"
# Regular expressions

[dependencies.once_cell]
version = "1.20"
# Lazy static initialization

[dependencies.parking_lot]
version = "0.12"
# Better synchronization primitives than std

[dependencies.dashmap]
version = "6.1"
# Concurrent HashMap

# =============================================================================
# TESTING (dev-dependencies)
# =============================================================================

[dev-dependencies.proptest]
version = "1.5"
# Property-based testing

[dev-dependencies.mockall]
version = "0.13"
# Mocking library

[dev-dependencies.rstest]
version = "0.23"
# Fixture-based testing

[dev-dependencies.criterion]
version = "0.5"
features = ["html_reports"]
# Benchmarking framework

[dev-dependencies.testcontainers]
version = "0.23"
# Docker containers for integration tests

[dev-dependencies.tokio-test]
version = "0.4"
# Tokio testing utilities

[dev-dependencies.wiremock]
version = "0.6"
# HTTP mocking

[dev-dependencies.tempfile]
version = "3.13"
# Temporary files for testing

# =============================================================================
# BUILD DEPENDENCIES
# =============================================================================

[build-dependencies.tonic-build]
version = "0.12"
# Code generation for Protocol Buffers (if using gRPC)

# =============================================================================
# FEATURES
# =============================================================================

[features]
default = ["influxdb", "kafka", "axum-server", "ractor-actor"]

# Database backends
influxdb = ["influxdb2"]
prometheus-backend = ["prometheus"]

# Message queues
kafka = ["rdkafka"]
nats-mq = ["nats"]
rabbitmq = ["lapin"]

# HTTP frameworks
axum-server = ["axum", "tower", "tower-http"]
actix-server = ["actix-web"]

# Actor frameworks
ractor-actor = ["ractor"]
actix-actor = ["actix"]

# ML extras
ml-full = ["smartcore", "linfa", "nalgebra"]
anomaly-full = ["isolation_forest", "extended-isolation-forest", "hampel"]

# Error handling
snafu-errors = ["snafu"]

# Schema validation
schema-validation = ["jsonschema", "schemars"]

# =============================================================================
# PROFILES
# =============================================================================

[profile.dev]
opt-level = 0
debug = true
split-debuginfo = "unpacked"  # Faster debug builds

[profile.release]
opt-level = 3
lto = false
codegen-units = 16
debug = false
strip = false

[profile.release-optimized]
inherits = "release"
lto = "thin"
codegen-units = 1
strip = true
panic = "abort"

[profile.release-max]
inherits = "release"
lto = "fat"
codegen-units = 1
strip = true
panic = "abort"

# Optimize dependencies even in dev mode (keeps build reasonably fast)
[profile.dev.package."*"]
opt-level = 2

# =============================================================================
# WORKSPACE (if using multi-crate structure)
# =============================================================================

# Uncomment if using workspace
# [workspace]
# members = [
#     "crates/common",
#     "crates/ingestion",
#     "crates/processing",
#     "crates/detection",
#     "crates/storage",
#     "crates/api",
# ]
# resolver = "2"

# =============================================================================
# NOTES
# =============================================================================

# Version Updates:
# - Check crates.io for latest versions
# - Use `cargo update` to update within semver range
# - Use `cargo outdated` to find newer versions
# - Use `cargo audit` to check for vulnerabilities

# Feature Flags:
# - Start with default features
# - Add optional features as needed
# - Use `cargo build --features "feature1,feature2"` to enable

# Build Times:
# - Use `sccache` or `cargo-cache` for faster rebuilds
# - Consider `mold` linker on Linux (faster than lld)
# - Use `cargo check` during development (faster than build)

# Maintenance:
# - Review unmaintained dependencies regularly
# - Check GitHub activity and issue response times
# - Consider alternatives if no updates in 12+ months

# Performance:
# - Start with default optimizations
# - Profile before optimizing (use criterion, flamegraph)
# - Consider PGO for production if profiling data available

# =============================================================================
# RECOMMENDED READING
# =============================================================================

# Cargo Book: https://doc.rust-lang.org/cargo/
# Rust Performance Book: https://nnethercote.github.io/perf-book/
# Tokio Tutorial: https://tokio.rs/tokio/tutorial
# DataFusion Guide: https://datafusion.apache.org/
# OpenTelemetry Rust: https://opentelemetry.io/docs/languages/rust/
